<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/site.webmanifest">
	<title>Random Japanese Sentence - Lite</title>

	<script>
		fetch("https://tatoeba.elnu.com/?from=jpn&orphans=no&sort=random&to=eng&trans_filter=limit&trans_to=eng&unapproved=no&limit=1&current=1").then(r => r.json())
			.then(response => {
				console.log(response);
				let japaneseText = response.results[0].text;

				// filter the Japanese Text for full width period, and replace it with a half width period
				japaneseRuby = japaneseRuby.replace(/。/g, "｡").replace(/？/g, "?").replace(/！/g, "!");

				japanese.innerHTML = japaneseRuby;
				if (response.results[0].translations[0]) {
					translation.innerHTML = response.results[0].translations[0][0].text;
				}
				else if (response.results[0].translations[1]) {
					translation.innerHTML = response.results[0].translations[1][0].text;
				}
				else {
					translation.innerHTML = "No translation available";
				}

				speak.addEventListener("click", () => {
					let utterance = new SpeechSynthesisUtterance(japaneseText);
					utterance.lang = "ja-JP";
					utterance.rate = 0.8;
					speechSynthesis.speak(utterance);
				})
			})
	</script>

	<style>
		body {
			font-size: clamp(16px, 2.2vw, 50px);
			/* background: black; */
			background: rgb(2, 0, 36);
			background: radial-gradient(circle, rgb(0, 0, 0) 0%, rgb(2, 2, 68) 100%);
			color: white;
			padding: clamp(16px, 1vw, 20px);

			font-family: 'Baskerville', 'YuMincho +36p Kana', serif;
		}

		h1 {
			font-weight: 900;
		}
	</style>
</head>

<body>
	<div style="display:grid;place-items:center;align-content: center; height: 100vh">
		<h1 id="japanese" style="text-align: center; margin: 0 0 0.2em;"></h1>
		<span id="translation" style="text-align: center;"></span>

		<button id="speak">Speak Japanese Sentence</button>
	</div>
</body>

</html>